# 手術室シフト管理システム

看護師のシフト希望調査結果から、公平な2交代制の手術室シフト表を自動生成するWebアプリケーションです。

## 🔗 アクセス

### GitHub Pages（推奨）
リポジトリのSettings → Pages でGitHub Pagesを有効化すると、以下のURLでアクセス可能：

- **👉 [ログイン（トップページ）](https://doraemon0218.github.io/shift_generator/index.html)** - ログイン画面
- **👉 [アプリトップ](https://doraemon0218.github.io/shift_generator/top.html)** - ログイン後メニュー
- **👉 [シフト生成](https://doraemon0218.github.io/shift_generator/generator.html)** - 管理者向け

### ローカル環境
```bash
cd shift_generator
python3 -m http.server 8000
```
- **👉 [ログイン（トップページ）](http://localhost:8000/index.html)** - ログイン画面
- **👉 [アプリトップ](http://localhost:8000/top.html)** - ログイン後メニュー
- **👉 [シフト生成](http://localhost:8000/generator.html)** - 管理者向け

## 🚀 クイックスタート

### ローカルで起動

```bash
cd shift_generator
python3 -m http.server 8000
```

ブラウザで以下のURLにアクセス：

**👉 [ログイン（トップページ）](http://localhost:8000/index.html) → [アプリトップ](http://localhost:8000/top.html)**

または、デモ起動スクリプトを使用：

```bash
./DEMO_START.sh
```

### 🔗 直接アクセス

- **ログイン（トップページ）**: [http://localhost:8000/index.html](http://localhost:8000/index.html)
- **アプリトップ**: [http://localhost:8000/top.html](http://localhost:8000/top.html) (ログイン後)
- **シフト生成**: [http://localhost:8000/generator.html](http://localhost:8000/generator.html) (管理者)

## 📋 主な機能

### 1. ログイン機能
- 姓・名・Gmail・パスワードでログイン
- 初回ログイン時は自動的にユーザー登録
- 初回ユーザーは自動的に管理者になる
- 初回登録時に入職年（西暦）と現在の夜勤状況を申告（以降は管理者が管理）

### 2. シフト希望入力
- **カレンダー形式**で1ヶ月分を一覧表示
- 各日をクリックして希望を選択
- 選択肢：
  - 休み希望なし（勤務可能）
  - 日勤のみ不可
  - 夜勤のみ不可（夜勤をする人のみ）
  - 終日不可
  - 夜勤明けならOK（夜勤をする人のみ）
- 途中保存・再開機能
- 管理者に提出機能

### 3. 締め切り管理
- 管理者が締め切り日時を設定
- 締め切り情報を大きく表示
- 締め切り3日前に未提出者にリマインダーメール送信（テンプレート）

### 4. 管理者機能
- **看護師の夜勤設定管理**: 各看護師の夜勤（当直）設定を変更
- **提出状況確認**: 提出済み/未提出の人数と詳細を確認
- **希望データのCSVエクスポート**: 全看護師の希望データを一括エクスポート
- **シフト表生成**: CSVファイルから公平なシフト表を自動生成
- **登録データ削除**: 個別の看護師について、登録済みのシフト希望・提出状況・価値観をリセット

### 5. 個人設定
- 休日に関する希望設定
- いつでも修正可能


 **初回ログイン（管理者になる）**
   - 任意の姓・名・Gmail・パスワードでログイン
   - 初回ユーザーは自動的に管理者になります

### 管理者としての使い方

1. **締め切りを設定**
   - 管理者ページ → 「締め切り設定」
   - 「毎月15日23:59に設定」ボタンまたは手動設定

2. **看護師の夜勤設定**
   - 管理者ページ → 「看護師の夜勤設定」
   - 「夜勤設定一覧を表示」ボタン
   - 各看護師の夜勤設定を変更

3. **提出状況を確認**
   - 管理者ページ → 「提出状況確認」
   - 「提出状況を更新」ボタンで最新情報を取得

4. **希望データをエクスポート**
   - 管理者ページ → 「希望データのエクスポート」
   - 「全希望データをCSVでエクスポート」ボタン

5. **シフト表を生成**
   - 管理者ページ → 「シフト表生成ページへ移動」
   - `generator.html` でCSVファイルをアップロード
   - 「シフト表を生成」ボタン

### 看護師としての使い方

1. **ログイン**
   - ログイン（トップページ）で姓・名・Gmail・パスワードを入力
   - 入職年（西暦）と現在の夜勤状況を選択（初回登録時）

2. **シフト希望を入力**
   - トップページ → 「シフト希望入力」
   - カレンダーで各日をクリックして希望を選択
   - 「💾 下書き保存」で途中保存
   - 「📤 管理者に提出」で提出完了

3. **価値観設定**
   - トップページ → 「価値観設定」
   - 夜勤明けの過ごし方などの価値観を設定

## 📁 ファイル構成

```
shift_generator/
├── index.html              # ログインページ（トップ）
├── login.js                # ログイン処理
├── top.html                # トップページ
├── top.js                  # トップページ処理
├── nurse_input.html        # シフト希望入力ページ
├── nurse_input.js          # 希望入力処理
├── admin.html              # 管理者ページ
├── admin.js                # 管理者機能
├── generator.html          # シフト生成ページ
├── script.js               # シフト生成ロジック
├── past_shifts.html        # 過去データ参照ページ
├── DEMO.md                 # デモガイド
├── DEMO_START.sh           # デモ起動スクリプト
└── data/
    └── shift_requests.csv  # サンプルデータ
```

## 🔐 デモ用アカウント

### 管理者アカウント
- 姓: `山田`
- 名: `太郎`
- Gmail: `yamada@example.com`
- パスワード: `password123`

### 看護師アカウント
- 姓: `佐藤`
- 名: `花子`
- Gmail: `sato@example.com`
- パスワード: `password456`

## 🎨 画面遷移

```
[ログイン（トップ）] (index.html)
    ↓
[アプリトップ] (top.html)
    ├─→ [シフト希望入力] (nurse_input.html)
    ├─→ [価値観設定] (nurse_input.html?page=settings)
    ├─→ [過去のシフトデータ参照] (past_shifts.html)
    └─→ [管理者用画面] (admin.html) ※管理者のみ
            └─→ [シフト生成] (generator.html)

```
